@inject StyleSidebarViewModel ViewModel

<RadzenStack Orientation="Orientation.Vertical">
    <RadzenText TextStyle="TextStyle.DisplayH6">Properties</RadzenText>
    @if (ViewModel.IsEnable.Value && ViewModel.FocusedCount.Value > 0 && ViewModel.FirstSelectedElement.Value.Clade is not null)
    {
        Clade clade = ViewModel.FirstSelectedElement.Value.Clade;
        <RadzenRow JustifyContent="JustifyContent.SpaceBetween" AlignItems="AlignItems.Center">
            <RadzenText>Branch color: </RadzenText>
            <RadzenColorPicker @bind-Value="ViewModel.BranchColor.Value" />
        </RadzenRow>
        @if (ViewModel.LeafSelected.Value)
        {
            <RadzenRow JustifyContent="JustifyContent.SpaceBetween" AlignItems="AlignItems.Center">
                <RadzenText>Leaf color: </RadzenText>
                <RadzenColorPicker @bind-Value="ViewModel.LeafColor.Value" />
            </RadzenRow>
        }
        @if (ViewModel.FocusedCount.Value == 1 && ViewModel.SelectionTarget.Value is SelectionMode.Node)
        {
            <RadzenRow JustifyContent="JustifyContent.SpaceBetween" AlignItems="AlignItems.Center">
                <RadzenText>Clade label:</RadzenText>
                <RadzenTextBox @bind-Value="ViewModel.CladeLabel.Value" />
            </RadzenRow>
            <RadzenRow JustifyContent="JustifyContent.SpaceBetween" AlignItems="AlignItems.Center">
                <RadzenText>Shade color:</RadzenText>
                <RadzenColorPicker @bind-Value="ViewModel.ShadeColor.Value" />
            </RadzenRow>
            if (clade.IsLeaf)
            {
                <RadzenRow JustifyContent="JustifyContent.SpaceBetween" AlignItems="AlignItems.Center">
                    <RadzenText>Leaf label:</RadzenText>
                    <RadzenTextBox @bind-Value="ViewModel.LeafLabel.Value" />
                </RadzenRow>
            }
            else
            {
                <RadzenRow JustifyContent="JustifyContent.SpaceBetween" AlignItems="AlignItems.Center">
                    <RadzenText>Support value:</RadzenText>
                    <RadzenTextBox @bind-Value="ViewModel.Supports.Value" />
                </RadzenRow>
            }
        }
    }
</RadzenStack>


@code {
    /// <inheritdoc/>
    protected override async Task OnInitializedAsync()
    {
        ViewModel.PropertyChanged += (_, _) => InvokeAsync(StateHasChanged);
        await Task.CompletedTask;
    }
}
